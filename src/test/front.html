<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Include Label Studio stylesheet -->
    <link
      href="https://unpkg.com/label-studio@1.0.1/build/static/css/main.css"
      rel="stylesheet"
    />
    <!-- Include the Label Studio library -->
    <script src="https://unpkg.com/label-studio@1.0.1/build/static/js/main.js"></script>
  </head>
  <body>
    <div id="label-studio">
      <!-- Initialize Label Studio -->
      <script>
        var labelStudio = new LabelStudio("label-studio", {
          config: `
          <View>
<Header value="Select label and start to click on image"/>
  <View style="display:flex;align-items:start;gap:8px;flex-direction:column-reverse">
    <Image name="img" value="$image" zoom="true" zoomControl="true" rotateControl="false" grid="true" brightnessControl="true" contrastControl="true"/>
    <View>
      <Filter toName="tag" minlength="0" name="filter"/>
      <RectangleLabels name="tag" toName="img" showInline="true">
        <Label value="Hello"/>
        <Label value="World"/>
      </RectangleLabels>
    </View>
  </View>
</View>
    `,

          interfaces: [
            "panel",
            "update",
            "controls",
            "side-column",
            "annotations:menu",
            "annotations:add-new",
            "annotations:delete",
            "predictions:menu",
          ],

          user: {
            pk: 1,
            firstName: "James",
            lastName: "Dean",
          },

          task: {
            annotations: [],
            predictions: [],
            id: 1,
            data: {
              // audio: "https://app.heartex.ai/static/samples/game.wav",
              image:
                "https://images.unsplash.com/photo-1548391350-968f58dedaed?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
            },
          },

          onLabelStudioLoad: function (LS) {
            var c = LS.annotationStore.addAnnotation({
              userGenerate: true,
            });
            LS.annotationStore.selectAnnotation(c.id);
          },
          onSubmitAnnotation: function (LS, annotations) {
            console.log("LS add:", { LS });
            console.log(annotations.serialized);
            annotations = JSON.parse(JSON.stringify(annotations));
            console.log("annotations add:", { annotations });
            // console.log(annotations.serializeAnnotation());
            // Streamlit.setComponentValue(annotations);
          },
          onUpdateAnnotation: function (LS, annotations) {
            console.log("LS update:", { LS });
            let flag = 1;

            annotations = JSON.parse(JSON.stringify(annotations));
            results = [annotations, flag];
            console.log("annotations update:", { results });
            // console.log(annotations.serializeAnnotation());
            // Streamlit.setComponentValue(annotations);
          },
        });
      </script>
    </div>
  </body>
</html>
