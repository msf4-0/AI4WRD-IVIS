{"version":3,"sources":["DataTable.tsx","index.tsx"],"names":["withStreamlitConnection","args","theme","rows","console","log","columns","checkbox","myTheme","primaryColor","secondaryBackgroundColor","textColor","backgroundColor","font","classes","makeStyles","createStyles","root","border","height","color","fontFamily","join","WebkitFontSmoothing","letterSpacing","display","borderRight","width","borderRadius","borderColor","position","borderTop","borderLeft","transform","opacity","transition","content","top","left","useStyles","useState","page","setPage","pageSize","setPageSize","selectionModel","setSelectionModel","frameHeight","size","totalPage","Math","floor","length","rows_length","frameHeightCalc","useEffect","Streamlit","setFrameHeight","style","flexGrow","autoPageSize","autoHeight","pagination","onPageChange","newPage","onPageSizeChange","newPageSize","rowsPerPageOptions","checkboxSelection","onSelectionModelChange","newSelectionModel","setComponentValue","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b08ea4f8.chunk.js","sourcesContent":["/* \nCopyright (C) 2021 Selangor Human Resource Development Centre\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License. \n\nCopyright (C) 2021 Selangor Human Resource Development Centre\nSPDX-License-Identifier: Apache-2.0\n========================================================================================\n*/\n\nimport { ReactElement, useEffect, useState } from \"react\";\nimport {\n  Streamlit,\n  withStreamlitConnection,\n  ComponentProps,\n} from \"streamlit-component-lib\";\nimport {\n  DataGrid,\n  GridRowsProp,\n  GridColDef,\n  GridRowId,\n} from \"@material-ui/data-grid\";\nimport { makeStyles, createStyles } from \"@material-ui/styles\";\n\n//To store object of Streamlit Theme props\ninterface ComponentTheme {\n  primaryColor: string | undefined;\n  secondaryBackgroundColor: string | undefined;\n  textColor: string | undefined;\n  backgroundColor: string | undefined;\n  font: string | undefined;\n}\n\n// TODO #134 Pending Text Wrap for Cells\n\nfunction DataTable({ args, theme }: ComponentProps): ReactElement {\n  //Define Rows and Columns\n  const rows: GridRowsProp = args.rows;\n  console.log(rows);\n  //Define Columns\n  const columns: GridColDef[] = args.columns;\n  //Get checkbox boolean\n  const checkbox: boolean = args.checkbox;\n  console.log(checkbox);\n  // Declare theme from Streamlit Component\n  let myTheme: ComponentTheme = {\n    primaryColor: theme?.primaryColor,\n    secondaryBackgroundColor: theme?.secondaryBackgroundColor,\n    textColor: theme?.textColor,\n    backgroundColor: theme?.backgroundColor,\n    font: theme?.font,\n  };\n\n  function customCheckbox() {\n    return {\n      \"& .MuiCheckbox-root svg\": {\n        width: 16,\n        height: 16,\n        backgroundColor: \"transparent\",\n        border: `1px solid ${\n          myTheme.backgroundColor === \"#ffffff\" ? \"#d9d9d9\" : \"#98989A\"\n        }`,\n        borderRadius: 2,\n      },\n      \"& .MuiCheckbox-root svg path\": {\n        display: \"none\",\n      },\n      \"& .MuiCheckbox-root.Mui-checked:not(.MuiCheckbox-indeterminate) svg\": {\n        backgroundColor: \"#1890ff\",\n        borderColor: \"#1890ff\",\n      },\n      \"& .MuiCheckbox-root.Mui-checked .MuiIconButton-label:after\": {\n        position: \"absolute\",\n        display: \"table\",\n        border: \"2px solid #fff\",\n        borderTop: 0,\n        borderLeft: 0,\n        transform: \"rotate(45deg) translate(-50%,-50%)\",\n        opacity: 1,\n        transition: \"all .2s cubic-bezier(.12,.4,.29,1.46) .1s\",\n        content: '\"\"',\n        top: \"50%\",\n        left: \"39%\",\n        width: 5.71428571,\n        height: 9.14285714,\n      },\n      \"& .MuiCheckbox-root.MuiCheckbox-indeterminate .MuiIconButton-label:after\":\n        {\n          width: 8,\n          height: 8,\n          backgroundColor: \"#1890ff\",\n          transform: \"none\",\n          top: \"39%\",\n          border: 0,\n        },\n    };\n  }\n\n  const useStyles = makeStyles(() =>\n    createStyles({\n      root: {\n        //set border colour based on active background color from Streamlit\n        //supports Light and Dark mode\n        border: `1px solid ${\n          myTheme.backgroundColor === \"#ffffff\" ? \"#d9d9d9\" : \"#98989A\"\n        }`,\n\n        height: \"auto\",\n        color:\n          myTheme.backgroundColor === \"#ffffff\"\n            ? \"rgba(0,0,0,1)\"\n            : \"rgba(255,255,255,1)\",\n        fontFamily: [\n          myTheme.font,\n          \"-apple-system\",\n          \"BlinkMacSystemFont\",\n          '\"Segoe UI\"',\n          \"Roboto\",\n          '\"Helvetica Neue\"',\n          \"Arial\",\n          \"sans-serif\",\n          '\"Apple Color Emoji\"',\n          '\"Segoe UI Emoji\"',\n          '\"Segoe UI Symbol\"',\n        ].join(\",\"),\n        WebkitFontSmoothing: \"auto\",\n        letterSpacing: \"normal\",\n        \"& .MuiDataGrid-columnsContainer\": {\n          backgroundColor:\n            myTheme.backgroundColor === \"#ffffff\"\n              ? \"#fafafa\"\n              : myTheme.secondaryBackgroundColor, //working\n        },\n        \"& .MuiDataGrid-iconSeparator\": {\n          display: \"none\",\n        },\n        \"& .MuiDataGrid-columnHeader, .MuiDataGrid-cell\": {\n          //working\n          borderRight: `1px solid ${\n            myTheme.backgroundColor === \"#ffffff\"\n              ? \"#f0f0f0\"\n              : myTheme.secondaryBackgroundColor\n          }`,\n        },\n\n        // \"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell\": {\n        //   borderBottom: `1px solid ${\n        //     myTheme.backgroundColor === \"#ffffff\"\n        //       ? \"#f0f0f0\"\n        //       : myTheme.secondaryBackgroundColor\n        //   }`,\n        // },\n        // \"& .MuiDataGrid-cell\": {\n        //   color: myTheme.textColor,\n        // },\n        \"& .MuiPagination-root\": {\n          color: \"secondary\",\n        },\n        ...customCheckbox(), // Custom Checkbox\n      },\n    })\n  );\n\n  // TODO #27 Add dark mode for Pagination\n  const classes = useStyles();\n  const [page, setPage] = useState(0);\n  const [pageSize, setPageSize] = useState<number>(10);\n  const [selectionModel, setSelectionModel] = useState<GridRowId[]>([]);\n  const headerHeight: number = 56;\n  const rowHeight: number = 52;\n  const footerHeight: number = 55;\n  const offset: number = 15;\n\n  console.log(pageSize);\n\n  /* Function to calculate the frame height to render the frame dynamically */\n  function frameHeightCalc(size: number) {\n    let totalPage = Math.floor(rows.length / size); //calculate the floor divisor to obtain number of pages\n    let rows_length = rows.length;\n    let frameHeight = 215; /* default height when there is no data */\n\n    //Number of rows at the last page not equal to pageSize\n    if (rows_length > 0) {\n      if (rows_length % size !== 0 && page === totalPage) {\n        //For last page -> frame height is the number of remainder rows\n        let remainder = rows.length % size;\n        frameHeight = headerHeight + rowHeight * remainder + footerHeight;\n      } else {\n        frameHeight = headerHeight + rowHeight * size + footerHeight;\n      }\n    }\n    return frameHeight;\n  }\n\n  const frameHeight = frameHeightCalc(pageSize) + offset;\n  console.log(\"Rows length\", rows.length);\n\n  console.log(\"frame height\", frameHeight);\n  useEffect(() => Streamlit.setFrameHeight(frameHeight)); // TODO\n  /********CALLBACK FUNCTIONS********/\n\n  //Callback to change page\n  const onPageChange = (newPage: number) => {\n    setPage(newPage);\n    Streamlit.setFrameHeight();\n  };\n  //Callback to modify page size\n  const onPageSizeChange = (newPageSize: number) => {\n    setPageSize(newPageSize);\n    Streamlit.setFrameHeight();\n  };\n  //Callback when row is selected via Checkbox\n  const onSelectionModelChange = (newSelectionModel: GridRowId[]) => {\n    setSelectionModel(newSelectionModel);\n    Streamlit.setComponentValue(newSelectionModel); //Return Selected Row ID back to Python land\n    console.log(newSelectionModel);\n  };\n\n  return (\n    // <div style={{ height: 500, width: \"100%\" }}>\n    <div style={{ height: 400, width: \"100%\" }}>\n      <div style={{ display: \"flex\", height: \"100%\" }}>\n        <div style={{ flexGrow: 1 }}>\n          <DataGrid\n            classes={{ root: classes.root }}\n            autoPageSize\n            autoHeight={true}\n            pagination\n            // components={{\n            //   Pagination: CustomPagination,\n            // }}\n            page={page}\n            pageSize={pageSize}\n            onPageChange={onPageChange}\n            onPageSizeChange={onPageSizeChange}\n            rows={rows}\n            columns={columns}\n            rowsPerPageOptions={[5, 10, 20]}\n            checkboxSelection={checkbox}\n            // disableSelectionOnClick\n            onSelectionModelChange={onSelectionModelChange}\n            selectionModel={selectionModel}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withStreamlitConnection(DataTable);\n","/* \nCopyright (C) 2021 Selangor Human Resource Development Centre\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\nhttp://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License. \n\nCopyright (C) 2021 Selangor Human Resource Development Centre\nSPDX-License-Identifier: Apache-2.0\n========================================================================================\n*/\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport DataTable from \"./DataTable\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <DataTable />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}